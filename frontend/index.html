<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindMaze - Your Mental Wellness Companion</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Authentication Page -->
    <div id="authPage" class="page active">
        <div class="auth-container">
            <div class="auth-card">
                <div class="emoji-title">üß©</div>
                <h1>Welcome to MindMaze</h1>
                <p class="subtitle">Your safe space for mental wellness</p>
                
                <div class="auth-tabs">
                    <button class="auth-tab-btn active" onclick="switchAuthTab('login')">Sign In</button>
                    <button class="auth-tab-btn" onclick="switchAuthTab('signup')">Sign Up</button>
                </div>

                <!-- Login Form -->
                <div id="loginForm" class="auth-form active">
                    <div class="form-group">
                        <label for="loginEmail">Email:</label>
                        <input type="email" id="loginEmail" placeholder="your@email.com">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password:</label>
                        <input type="password" id="loginPassword" placeholder="Enter password">
                    </div>
                    <div class="form-group">
                        <label for="loginAge">Age (13-19):</label>
                        <input type="number" id="loginAge" placeholder="Enter your age" min="13" max="19">
                    </div>
                    <p id="loginError" class="error-message"></p>
                    <button onclick="handleLogin()" class="btn btn-primary btn-large">Sign In</button>
                </div>

                <!-- Sign Up Form -->
                <div id="signupForm" class="auth-form">
                    <div class="form-group">
                        <label for="signupName">Full Name:</label>
                        <input type="text" id="signupName" placeholder="Your full name">
                    </div>
                    <div class="form-group">
                        <label for="signupEmail">Email:</label>
                        <input type="email" id="signupEmail" placeholder="your@email.com">
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password:</label>
                        <input type="password" id="signupPassword" placeholder="Create password (min 6 chars)">
                    </div>
                    <div class="form-group">
                        <label for="signupConfirm">Confirm Password:</label>
                        <input type="password" id="signupConfirm" placeholder="Confirm password">
                    </div>
                    <div class="form-group">
                        <label for="signupAge">Age (13-19):</label>
                        <input type="number" id="signupAge" placeholder="Enter your age" min="13" max="19">
                    </div>
                    <p id="signupError" class="error-message"></p>
                    <button onclick="handleSignup()" class="btn btn-primary btn-large">Create Account</button>
                </div>

                <div class="disclaimer">
                    <p>By continuing, you agree to our commitment to your privacy and safety.</p>
                    <p>This is a support platform, not a medical service.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="page">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <span class="logo-emoji">üß©</span>
                        <h1>MindMaze</h1>
                    </div>
                    <p class="tagline">Your space, your peace, your growth</p>
                    <div class="user-menu">
                        <span id="userName" class="user-email"></span>
                        <button onclick="handleLogout()" class="btn btn-outline btn-small">Logout</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <div class="container">
                <button class="tab-btn active" onclick="switchTab('checkin')">üìä Check-In</button>
                <button class="tab-btn" onclick="switchTab('growth')">üìà Growth Map</button>
                <button class="tab-btn" onclick="switchTab('games')">üéÆ Games</button>
                <button class="tab-btn" onclick="switchTab('emergency')">üÜò Help</button>
            </div>
        </nav>

        <!-- Content Area -->
        <main class="container main-content">
            <!-- Check-In Tab -->
            <div id="checkinTab" class="tab-content active">
                <div class="card">
                    <h2>How are you feeling today?</h2>
                    <p class="subtitle">Check in with your emotions - no judgment, just honesty</p>
                    
                    <div class="mood-grid">
                        <button class="mood-btn" onclick="selectMood('happy')" data-mood="happy" title="Happy">üòä</button>
                        <button class="mood-btn" onclick="selectMood('sad')" data-mood="sad" title="Sad">üò¢</button>
                        <button class="mood-btn" onclick="selectMood('anxious')" data-mood="anxious" title="Anxious">üò∞</button>
                        <button class="mood-btn" onclick="selectMood('angry')" data-mood="angry" title="Angry">üò†</button>
                        <button class="mood-btn" onclick="selectMood('neutral')" data-mood="neutral" title="Neutral">üòê</button>
                        <button class="mood-btn" onclick="selectMood('excited')" data-mood="excited" title="Excited">ü§©</button>
                        <button class="mood-btn" onclick="selectMood('calm')" data-mood="calm" title="Calm">üòå</button>
                    </div>

                    <div class="form-group">
                        <label for="moodNotes">Add a note (optional):</label>
                        <textarea id="moodNotes" placeholder="What's on your mind?" rows="3"></textarea>
                    </div>

                    <div class="button-group">
                        <button onclick="saveMood()" id="saveMoodBtn" class="btn btn-primary" disabled>Save Check-in</button>
                    </div>

                    <div id="successMessage" class="success-message" style="display: none;">
                        ‚úì Great job checking in! Keep going! üåü
                    </div>
                </div>
            </div>

            <!-- Growth Map Tab -->
            <div id="growthTab" class="tab-content">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalMoods">0</div>
                        <div class="stat-label">Total Check-ins</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="weekMoods">0</div>
                        <div class="stat-label">This Week</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="activePercent">0%</div>
                        <div class="stat-label">Active</div>
                    </div>
                </div>

                <div class="card">
                    <h3>Mood Distribution</h3>
                    <canvas id="moodChart" width="400" height="200"></canvas>
                </div>

                <div class="card">
                    <h3>Your Mood History</h3>
                    <div id="historyList" class="history-list"></div>
                </div>
            </div>

            <!-- Games Tab -->
            <div id="gamesTab" class="tab-content">
                <div class="games-container">
                    <h2 style="text-align: center; margin-bottom: 3rem; font-size: 2rem;">üéÆ Wellness Games</h2>
                    <div class="games-grid">
                        <div class="game-card" onclick="startGame('breathing')">
                            <div class="game-emoji">ü´Å</div>
                            <h3>Breathing</h3>
                            <p>4-7-8 guided breathing for calm</p>
                            <button class="btn btn-outline">Play</button>
                        </div>
                        <div class="game-card" onclick="startGame('focus')">
                            <div class="game-emoji">üéÆ</div>
                            <h3>Focus Match</h3>
                            <p>Match pairs & boost focus</p>
                            <button class="btn btn-outline">Play</button>
                        </div>
                        <div class="game-card" onclick="startGame('puzzle')">
                            <div class="game-emoji">üß©</div>
                            <h3>Calm Puzzle</h3>
                            <p>Relax with tile puzzles</p>
                            <button class="btn btn-outline">Play</button>
                        </div>
                        <div class="game-card" onclick="startGame('color')">
                            <div class="game-emoji">üé®</div>
                            <h3>Color Zen</h3>
                            <p>Match colors & find harmony</p>
                            <button class="btn btn-outline">Play</button>
                        </div>
                        <div class="game-card" onclick="startGame('memory')">
                            <div class="game-emoji">üß†</div>
                            <h3>Memory Flips</h3>
                            <p>Sharpen memory with fun flips</p>
                            <button class="btn btn-outline">Play</button>
                        </div>
                        <div class="game-card" onclick="startGame('click')">
                            <div class="game-emoji">‚ö°</div>
                            <h3>Reflex Rush</h3>
                            <p>Test your reaction time</p>
                            <button class="btn btn-outline">Play</button>
                        </div>
                        <div class="game-card" onclick="startGame('zen')">
                            <div class="game-emoji">üïâÔ∏è</div>
                            <h3>Zen Tap</h3>
                            <p>Rhythmic tapping meditation</p>
                            <button class="btn btn-outline">Play</button>
                        </div>
                        <div class="game-card" onclick="startGame('journey')">
                            <div class="game-emoji">üåà</div>
                            <h3>Dream Path</h3>
                            <p>Create your healing journey</p>
                            <button class="btn btn-outline">Play</button>
                        </div>
                    </div>
                </div>

                <!-- Game Modals -->
                <div id="breathingModal" class="modal">
                    <div class="modal-content">
                        <button onclick="closeGame()" class="close-btn">&times;</button>
                        <h2>Guided Breathing</h2>
                        <div class="breathing-circle" id="breathingCircle">ü´Å</div>
                        <div class="breathing-text" id="breathingText">Breathe In</div>
                        <div class="breathing-cycle">Cycles: <span id="cycleCount">0</span></div>
                        <button onclick="toggleBreathing()" id="breathingBtn" class="btn btn-primary">Start</button>
                    </div>
                </div>

                <div id="focusModal" class="modal">
                    <div class="modal-content">
                        <button onclick="closeGame()" class="close-btn">&times;</button>
                        <h2>Focus Match Game</h2>
                        <div class="score-display">Score: <span id="focusScore">0</span></div>
                        <div class="focus-grid" id="focusGrid"></div>
                        <button onclick="resetFocusGame()" class="btn btn-secondary">Reset Game</button>
                    </div>
                </div>

                <div id="puzzleModal" class="modal">
                    <div class="modal-content">
                        <button onclick="closeGame()" class="close-btn">&times;</button>
                        <h2>Calm Puzzle</h2>
                        <div class="puzzle-grid" id="puzzleGrid"></div>
                        <div class="progress">Progress: <span id="puzzleProgress">0</span>/9</div>
                    </div>
                </div>

                <div id="colorModal" class="modal">
                    <div class="modal-content">
                        <button onclick="closeGame()" class="close-btn">&times;</button>
                        <h2>Color Zen</h2>
                        <div class="score-display">Score: <span id="colorScore">0</span></div>
                        <div id="colorGrid" class="color-grid"></div>
                        <button onclick="resetColorGame()" class="btn btn-secondary">Reset Game</button>
                    </div>
                </div>

                <div id="memoryModal" class="modal">
                    <div class="modal-content">
                        <button onclick="closeGame()" class="close-btn">&times;</button>
                        <h2>Memory Flips</h2>
                        <div class="score-display">Matches: <span id="memoryScore">0</span>/6</div>
                        <div id="memoryGrid" class="memory-grid"></div>
                        <button onclick="resetMemoryGame()" class="btn btn-secondary">Reset Game</button>
                    </div>
                </div>

                <div id="clickModal" class="modal">
                    <div class="modal-content">
                        <button onclick="closeGame()" class="close-btn">&times;</button>
                        <h2>Reflex Rush</h2>
                        <div class="click-display">
                            <div class="click-score-box">
                                <span class="click-label">Score:</span>
                                <span id="clickScore" class="click-big">0</span>
                            </div>
                            <div class="click-time-box">
                                <span class="click-label">Time:</span>
                                <span id="clickTimer" class="click-big">30</span>s
                            </div>
                        </div>
                        <div id="clickTarget" class="click-target">Click!</div>
                        <button id="clickStartBtn" onclick="startClickGame()" class="btn btn-primary">Start Game</button>
                    </div>
                </div>

                <div id="zenModal" class="modal">
                    <div class="modal-content">
                        <button onclick="closeGame()" class="close-btn">&times;</button>
                        <h2>Zen Tap</h2>
                        <div class="score-display">Harmony: <span id="zenScore">0</span>%</div>
                        <div class="zen-instruction">Follow the rhythm and tap the orbs</div>
                        <div id="zenGrid" class="zen-grid"></div>
                        <button onclick="resetZenGame()" class="btn btn-secondary">Reset Game</button>
                    </div>
                </div>

                <div id="journeyModal" class="modal">
                    <div class="modal-content">
                        <button onclick="closeGame()" class="close-btn">&times;</button>
                        <h2>Dream Path</h2>
                        <div class="score-display">Journey: <span id="journeyStep">1</span>/5</div>
                        <div id="journeyPath" class="journey-path"></div>
                        <button onclick="nextJourneyStep()" class="btn btn-primary">Next Step</button>
                    </div>
                </div>
            </div>

            <!-- Emergency Tab -->
            <div id="emergencyTab" class="tab-content">
                <div class="card emergency-card">
                    <div class="emergency-header">
                        <span class="emoji">üÜò</span>
                        <div>
                            <h2>Emergency Support</h2>
                            <p>If you're in crisis, reach out now</p>
                        </div>
                    </div>

                    <div class="info-box warning">
                        <strong>‚ö†Ô∏è Disclaimer:</strong> MindMaze is NOT a substitute for professional medical advice or treatment.
                    </div>

                    <div class="form-group">
                        <label for="countrySelect">Select your location:</label>
                        <select id="countrySelect" onchange="updateHelpline()">
                            <option value="US">United States</option>
                            <option value="UK">United Kingdom</option>
                            <option value="IN">India</option>
                        </select>
                    </div>

                    <div id="helplineBox" class="helpline-box">
                        <p class="helpline-label" id="helplineName"></p>
                        <p class="helpline-number" id="helplineNumber"></p>
                        <button class="btn btn-danger">üìû Call Now</button>
                    </div>

                    <div class="card">
                        <h3>üí° Things You Can Do Now</h3>
                        <ul class="action-list">
                            <li>‚úì Call or text a trusted friend or family member</li>
                            <li>‚úì Practice a breathing or grounding exercise</li>
                            <li>‚úì Go to your nearest emergency room if in immediate danger</li>
                            <li>‚úì Reach out to a school counselor or trusted adult</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <p>üß© MindMaze ‚Äî Your Mental Wellness Companion</p>
                <p>Built with care. Designed for safety. Made for you.</p>
            </div>
        </footer>
    </div>

    <script src="firebase-auth.js"></script>
    <script src="app.js"></script>
</body>
</html>
